var TableFits=function(){"use strict";function s(){}var n="undefined"!=typeof window?window.MutationObserver||window.WebKitMutationObserver:void 0,a="undefined"!=typeof window?window.addEventListener:void 0;s.addEvent=function(t,i){if(n){var e=new n(function(t,e){(t[0].addedNodes.length||t[0].removedNodes.length)&&i()});e.observe(t,{childList:!0,subtree:!0}),t in s._storage||(s._storage[t]={}),s._storage[t][i]=e}else a&&(t.addEventListener("DOMSubtreeModified",i,!1),t.addEventListener("DOMNodeInserted",i,!1),t.addEventListener("DOMNodeRemoved",i,!1))},s.removeEvent=function(t,e){if(n){if(!(t in s._storage))return;if(!(e in s._storage[t]))return;s._storage[t][e].disconnect(),delete s._storage[t][e]}else a&&(t.removeEventListener("DOMSubtreeModified",e,!1),t.removeEventListener("DOMNodeInserted",e,!1),t.removeEventListener("DOMNodeRemoved",e,!1))},s._storage={};function e(t){this._table=t,this._groups={},this._namingGroupIndex={},this._nextGroupIndex=0,this.thead=[],this.mainTitleIndex=[],this.rowsClasses=[],this.rows=[],this._prepare()}function _(t,e){var i=document.createElement(t);return void 0!==e&&i.classList.add(e),i}e.make=function(t){return new e(t)},e.prototype._prepare=function(){var e=this,t=this._table.querySelectorAll("thead tr");[].forEach.call(t,function(t){e._nextGroupIndex=0,[].forEach.call(t.querySelectorAll("th"),e._prepareTH.bind(e))}),this._prepareRows()},e.prototype._prepareRows=function(){var s=this,t=this._table.querySelectorAll("tr"),n=0;[].forEach.call(t,function(t){var e=t.querySelectorAll("td");if(!(e.length<1)){0<t.classList.length&&(s.rowsClasses[n]=Array.prototype.slice.call(t.classList));var i=[];[].forEach.call(e,function(t){i.push({parent:t,childNodes:Array.prototype.slice.call(t.childNodes)})}),s.rows.push(i),++n}})},e.prototype._prepareTH=function(t,e){if(t.colSpan&&1<t.colSpan)this._prepareTHColspan(t,e);else if("tableFitsGroup"in t.dataset)this._prepareTHGroup(t,e);else{if((!t.rowSpan||t.rowSpan<=1)&&(this._nextGroupIndex+=1),void 0!==this._groups[e]&&0<t.parentNode.rowIndex)return this.thead[this._groups[e]].columns.push(t.innerText),void("tableFits"in t.dataset&&"title"===t.dataset.tableFits&&this.mainTitleIndex.push(this._groups[e].index+e));this.thead[e]=t.innerText,"tableFits"in t.dataset&&"title"===t.dataset.tableFits&&this.mainTitleIndex.push(e)}},e.prototype._prepareTHColspan=function(t,e){for(var i=0;i<t.colSpan;++i)this._groups[this._nextGroupIndex]=e,++this._nextGroupIndex;this.thead[e]={index:e,title:t.innerText,columns:[]}},e.prototype._prepareTHGroup=function(t,e){var i=t.dataset.tableFitsGroup;i in this._namingGroupIndex||(this._namingGroupIndex[i]=e),this._namingGroupIndex[i]in this.thead||(this.thead[this._namingGroupIndex[i]]={index:this._namingGroupIndex[i],title:i,columns:[]}),this.thead[this._namingGroupIndex[i]].columns.push(t.innerText),this._groups[e]=this._namingGroupIndex[i]};function i(t){this._container=t,this._thead=[],this._mainTitleIndex=[],this._rows=[],this._rowsClasses=[],this._mainClass=null}i.make=function(t){return new i(t)},i.prototype.setMainClass=function(t){return this._mainClass=t,this},i.prototype.setPrepare=function(t){return this._thead=t.thead,this._mainTitleIndex=t.mainTitleIndex,this._rows=t.rows,this._rowsClasses=t.rowsClasses,this},i.prototype.create=function(){var n=this;this._rows.forEach(function(t,e){var i=_("div",n._mainClass+"__tr");n._container.appendChild(i),n._rowsClasses[e]&&n._rowsClasses[e].forEach(function(t){i.classList.add(t)}),n._mainTitleIndex.length&&i.appendChild(n._createMainTitle(t));var s=_("div",n._mainClass+"__body");i.appendChild(s),n._createRowData(s,t)})},i.prototype._createMainTitle=function(a){var o=this,r=_("div",this._mainClass+"__head");return this._mainTitleIndex.forEach(function(t){var e=_("div",o._mainClass+"__head__item"),i=!1;if(a[t].childNodes.forEach(function(t){t instanceof HTMLInputElement?i=!0:t instanceof HTMLSelectElement&&(i=!0)}),i){var s=_("div",o._mainClass+"__th");s.appendChild(document.createTextNode(o._thead[t]));var n=_("div",o._mainClass+"__td");a[t].childNodes.forEach(function(t){n.appendChild(t)}),a[t].newParent=n,e.appendChild(s),e.appendChild(n)}else a[t].childNodes.forEach(function(t){e.appendChild(t)}),a[t].newParent=e;r.appendChild(e)}),r},i.prototype._createRowData=function(r,l){var h=this,d=0;Object.keys(this._thead).forEach(function(t){var e=h._thead[t],i=_("div",h._mainClass+"__item");if("string"!=typeof e){var s=_("div",h._mainClass+"__columns_title");s.appendChild(document.createTextNode(e.title));var n=_("div",h._mainClass+"__columns");e.columns.forEach(function(t){if(-1===h._mainTitleIndex.indexOf(d)){var e=_("div",h._mainClass+"__columns__col"),i=_("div",h._mainClass+"__th");i.appendChild(document.createTextNode(t));var s=_("div",h._mainClass+"__td");l[d].childNodes.forEach(function(t){s.appendChild(t)}),l[d].newParent=s,e.appendChild(i),e.appendChild(s),n.appendChild(e),++d}else++d}),i.appendChild(s),i.appendChild(n)}else{if(-1!==h._mainTitleIndex.indexOf(d))return void++d;var a=_("div",h._mainClass+"__th");a.appendChild(document.createTextNode(e));var o=_("div",h._mainClass+"__td");l[d].childNodes.forEach(function(t){o.appendChild(t)}),l[d].newParent=o,i.appendChild(a),i.appendChild(o),++d}r.appendChild(i)})};function o(t,e){this._config={mainClass:"table-fits",width:null,resize:!0,watch:!0},this._el="string"==typeof t?document.querySelector(t):t,this._parent=this._el.parentNode,this._parentCS=getComputedStyle(this._parent),this._el&&this._el.querySelector("thead")&&("tableFits"in this._el.dataset&&"no"===this._el.dataset.tableFits||(this._config=Object.assign({},this._config,e),this._widthPoint=this._config.width?this._config.width:null,"tableFitsWidth"in this._el.dataset&&(this._widthPoint=parseInt(this._el.dataset.tableFitsWidth,10)),this._el._tableFits&&this._el._tableFits.destroy(),(this._el._tableFits=this)._isTableFits=!1,this._elMinWidth=null,this._mainTitleIndex=[],this._thead=[],this._rows=[],this._rowsClasses=[],this._tableFitsEl=null,this._initHadler=this.onResize.bind(this),this._reloadHadler=this.onReload.bind(this),this._init(),this._initEvent()))}return o.make=function(t,e){return new o(t,e)},o.prototype._initEvent=function(){this._config.resize&&"undefined"!=typeof window&&window.addEventListener("resize",this._initHadler,!0),this._config.watch&&this._isTableFits&&"undefined"!=typeof window&&s.addEvent(this._el,this._reloadHadler)},o.prototype._offEvent=function(){this._config.resize&&"undefined"!=typeof window&&window.removeEventListener("resize",this._initHadler,!0),this._config.watch&&"undefined"!=typeof window&&s.removeEvent(this._el,this._reloadHadler)},o.prototype.onResize=function(){this._offEvent(),this._init(),this._initEvent()},o.prototype.onReload=function(){this._offEvent(),this._showTableDefault(),this.reset(),this._init(),this._initEvent()},o.prototype.reset=function(){this._isTableFits=!1,this._tableFitsEl=null,this._elMinWidth=null,this._mainTitleIndex=[],this._thead=[],this._rows=[],this._rowsClasses=[]},o.prototype.destroy=function(){this._offEvent(),this._showTableDefault(),this.reset(),this._el._tableFits=null},o.prototype._returnChildrenTo=function(i){this._rows.forEach(function(t){t.forEach(function(e){e.childNodes.forEach(function(t){"table"===i?e.parent.appendChild(t):e.newParent.appendChild(t)})})})},o.prototype._showTableDefault=function(){this._tableFitsEl&&this._isTableFits&&(this._isTableFits=!1,this._returnChildrenTo("table"),this._el.style.display="table",this._tableFitsEl.parentNode.removeChild(this._tableFitsEl))},o.prototype._isNeedTableFits=function(){var t=this._parent.clientWidth-parseFloat(this._parentCS.getPropertyValue("padding-left"))-parseFloat(this._parentCS.getPropertyValue("padding-right"));return this._widthPoint?t<=this._widthPoint:t<(this._elMinWidth?this._elMinWidth:this._el.offsetWidth)},o.prototype._init=function(){if(this._isNeedTableFits()){if(!this._isTableFits){this._isTableFits=!0,this._elMinWidth||(this._elMinWidth=this._el.offsetWidth),this._tableFitsEl?this._returnChildrenTo("mobile-block"):(this._prepareTableFits(),this._createTableFits()),this._el.style.display="none";var t=this._el.parentNode,e=this._el.nextSibling;e?t.insertBefore(this._tableFitsEl,e):t.appendChild(this._tableFitsEl)}}else this._showTableDefault()},o.prototype._prepareTableFits=function(){this._prepare=e.make(this._el),this._thead=this._prepare.thead,this._mainTitleIndex=this._prepare.mainTitleIndex,this._rows=this._prepare.rows,this._rowsClasses=this._prepare.rowsClasses},o.prototype._createTableFits=function(){this._tableFitsEl=document.createElement("div"),this._tableFitsEl.classList.add(this._config.mainClass),i.make(this._tableFitsEl).setMainClass(this._config.mainClass).setPrepare(this._prepare).create()},o}();
